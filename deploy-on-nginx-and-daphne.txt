https://okbaboularaoui.medium.com/how-to-set-up-django-with-postgres-nginx-and-daphne-django-channels-on-ubuntu-20-04-b0d24dcc7da9

https://youtu.be/TLGucyn9URA?si=wiMeBthxhKz_dGxc

add ssl cert = https://github.com/django/daphne



sudo nano /etc/systemd/system/daphne.service
=================daphne=====================
[Unit]
Description=daphne daemon
Requires=daphne.socket
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/jobFinder
ExecStart=/var/www/jobFinder/env/bin/daphne -b 0.0.0.0 -p 8000 jobFinder.asgi:application

[Install]
WantedBy=multi-user.target
=====================================
for ssl:
ExecStart=/var/www/jobFinder/env/bin/daphne -e ssl:443:privateKey=ssl/ceveve.com.key:certKey=ssl/ceveve_com/ceveve_com.crt jobFinder.asgi:application
ExecStart=/var/www/jobFinder/env/bin/daphne -e ssl:8000:privateKey=ssl/ceveve.com.key:certKey=ssl/ceveve_com/ceveve_com.crt -b www.ceveve.com -p 8001 jobFinder.asgi:application
=====================================



sudo nano /etc/nginx/sites-available/myproject
=================nginx====================
upstream channels-backend {server localhost:8000;}

server {
listen 80;
server_name www.ceveve.com;
location = /favicon.ico { access_log off; log_not_found off; }
location /static/ {
root /var/www/jobFinder;
}
location /media/ {
root /var/www/jobFinder;
}
location / {
proxy_pass http://channels-backend;
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "Upgrade";
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $http_host;
proxy_redirect off;
}
}

==============nginx-ssl==============
upstream channels-backend {server localhost:8000;}

server {
    listen 443 ssl;
    server_name domain-name.com; # Your website's domain name
    ssl_certificate /var/www/jobFinder/ssl/ceveve_com/ceveve_com.crt; # Path to the full chain of your SSL certificate
    ssl_certificate_key /var/www/jobFinder/ssl/ceveve.com.key; # Path to the private k

    listen 443 ssl;
    listen [::]:443 ssl;
    include /var/www/jobFinder/ssl/self-signed.conf;
    include /var/www/jobFinder/ssl/ssl-params.conf;
server_name www.ceveve.com;
location = /favicon.ico { access_log off; log_not_found off; }
location /static/ {
root /var/www/jobFinder;
}
location /media/ {
root /var/www/jobFinder;
}
location / {
proxy_pass http://channels-backend;
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "Upgrade";
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $http_host;
proxy_redirect off;
}
}
=====================================

sudo systemctl restart nginx
sudo systemctl daemon-reload
sudo systemctl restart daphne


